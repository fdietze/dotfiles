#!/bin/bash
if [ "$DISPLAY" ]; then
    if [ $(cat $HOME/.colors) = "light" ]; then exit 0; fi
    echo "light" > $HOME/.colors

    cp $HOME/.config/termite/config-light $HOME/.config/termite/config
    killall -USR1 termite

    VIMS=`vim --serverlist`
    for vim in $VIMS; do
        vim --servername $vim --remote-send '<Esc>:set background=light<CR>:colorscheme goodmorning<CR>'
    done

    herbstclient set window_border_width 3
    herbstclient set frame_border_width  3
    herbstclient set frame_border_active_color  '#00AF2B'
    herbstclient set window_border_active_color '#00AF2B'
    herbstclient set frame_border_normal_color  '#EEEEEE'
    herbstclient set window_border_normal_color '#EEEEEE'

    if [ ! "$1" = "nopanel" ]; then
        echo "restarting panel..."
        herbstclient emit_hook quit_panel
        sleep 1
        panel=~/.config/herbstluftwm/panel.sh
        for monitor in $(herbstclient list_monitors | cut -d: -f1) ; do
            # start it on each monitor
            echo $panel $monitor
            "$panel" $monitor &
        done
    fi

    nitrogen --set-zoom-fill ~/downloads/wallpapers/2443.jpg
fi


# set colors of console (without X)
if [ "$TERM" = "linux" ]; then
    setfont ter-p28b
    /bin/echo -e "
    \e]P0ffffff
    \e]P1df0076
    \e]P200af2b
    \e]P3ff6600
    \e]P4006fe6
    \e]P57700ff
    \e]P600c8ff
    \e]P7000000
    \e]P8000000
    \e]P9ff0088
    \e]PA00c120
    \e]PBff9400
    \e]PC2183ff
    \e]PD9c2cff
    \e]PE00a8ff
    \e]PF000000
    "
    # get rid of artifacts
    clear
fi
