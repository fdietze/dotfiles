#!/bin/bash
if [ "$DISPLAY" ]; then
    if [ $(cat $HOME/.colors) = "dark" ]; then exit 0; fi
    echo "dark" > $HOME/.colors

    cp $HOME/.config/termite/config-dark $HOME/.config/termite/config
    killall -USR1 termite

    VIMS=`vim --serverlist`
    for vim in $VIMS; do
        vim --servername $vim --remote-send '<Esc>:set background=dark<CR>:colorscheme solarized<CR>'
    done

    # source ~/.sh_aliases # load aliases
    # nvim_all_command "set background=dark"
    # nvim_all_command "colorscheme solarized"


    herbstclient set window_border_width 2
    herbstclient set frame_border_width  2
    herbstclient set frame_border_active_color  '#37BAFF'
    herbstclient set window_border_active_color '#37BAFF'
    herbstclient set frame_border_normal_color  '#7F7F7F'
    herbstclient set window_border_normal_color '#7F7F7F'

    if [ ! "$1" = "nopanel" ]; then
        echo "restarting panel..."
        herbstclient emit_hook quit_panel
        sleep 1
        panel=~/.config/herbstluftwm/panel.sh
        for monitor in $(herbstclient list_monitors | cut -d: -f1) ; do
            # start it on each monitor
            echo $panel $monitor
            "$panel" $monitor &
        done
    fi

    nitrogen --set-zoom-fill ~/downloads/wallpapers/bg_xiang.jpg
    # nitrogen --set-zoom-fill ~/downloads/wallpapers/Aurora-Borealis-Dual-Screen-HD-Wallpaper.jpg
else
    # set colors of console (without X)
    if [ "$TERM" = "linux" ]; then
        setfont ter-p28b
        /bin/echo -e "
        \e]P0181818
        \e]P1f8469f
        \e]P280e051
        \e]P3f89f2b
        \e]P42f93f8
        \e]P5a060e6
        \e]P642dd8f
        \e]P7dadada
        \e]P8465457
        \e]P9fa5baa
        \e]PAaafa5b
        \e]PBfaaa5b
        \e]PC5baafa
        \e]PDaa5bfa
        \e]PE5bfaaa
        \e]PFffffff
        "
        # get rid of artifacts
        clear
    fi
fi


