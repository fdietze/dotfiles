#!/bin/bash
if [ $(cat $HOME/.colors) = "dark" ]; then exit 0; fi
echo "dark" > $HOME/.colors

cp $HOME/.config/termite/config-dark $HOME/.config/termite/config
killall -USR1 termite


nitrogen --set-zoom ~/downloads/wallpapers/3d_bars-1920x1080.jpg

herbstclient set window_border_width 2
herbstclient set frame_border_width  2
herbstclient set frame_border_active_color  '#37BAFF'
herbstclient set window_border_active_color '#37BAFF'
herbstclient set frame_border_normal_color  '#7F7F7F'
herbstclient set window_border_normal_color '#7F7F7F'

VIMS=`vim --serverlist`
for vim in $VIMS; do
    vim --servername $vim --remote-send '<Esc>:colorscheme base16-chalk<CR>:set background=dark<CR>'
done


if [ ! "$1" = "nopanel" ]; then
    echo "restarting panel..."
    herbstclient emit_hook quit_panel
    sleep 1
    panel=~/.config/herbstluftwm/panel.sh
    for monitor in $(herbstclient list_monitors | cut -d: -f1) ; do
        # start it on each monitor
        echo $panel $monitor
        "$panel" $monitor &
    done
fi


