#!/bin/zsh -ie

echo "upgrading installed packages..."
sudo rm -rf /tmp/yaourt-tmp-$USER /tmp/makepkg
yaourt -Syua --devel --noconfirm
sudo rm -rf /tmp/yaourt-tmp-$USER /tmp/makepkg

echo "cleaning package cache..."
paccache -r && paccache -ruk0

echo "updating package search database..."
sudo pkgfile -u

echo "optimizing pacman database..."
sudo pacman-optimize



echo "updating zgen plugins..."
zgen update

echo "updating vim plugins..."
vim +PlugUpgrade +qall
vim +PlugInstall +qall
vim +PlugUpdate +qall

echo "updating ruby gems..."
gem update

echo "updating global npm packages"
npm -g update

echo "updating rust installation"
multirust update nightly

echo "updating git repos"
mr update



echo "updating mlocate database..."
sudo updatedb

# sudo btrfs filesystem defragment /
sync

exit 0
